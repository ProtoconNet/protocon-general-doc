.. _api:

===================================================
REST API
===================================================

| **Digest API** is a service that allows nodes to search blockchain data.
| It can be used in various applications, such as wallet or blockchain explorer.

* API is provided through *HTTP/2 network protocol*.
* Response message follows `HAL <https://datatracker.ietf.org/doc/html/draft-kelly-json-hal-08>`_ and is delivered in *JSON* format.
* API data storage can be set in :ref:`config` of Mitum Currency.
* Mitum's main storage can be used, or a separate database is also possible.
* *TLS certificates* required for *HTTP/2* will randomly generate self signed certificates if the service host is localhost unless the path of the file is set separately.

| If an operation is not included in the block due to a specific problem, the cause can be checked through the response.

---------------------------------------------------
Node
---------------------------------------------------

| REST API for querying the Mitum node.

+----------------------------------------+-----------------------+------------------------------------+
| REQUEST URL                            | METHOD                | RESPONSE                           |
+========================================+=======================+====================================+
| /                                      | GET                   | Node information                   |
+----------------------------------------+-----------------------+------------------------------------+

---------------------------------------------------
Block
---------------------------------------------------

| List of REST APIs for querying Mitum blocks.

+----------------------------------------+-----------------------+------------------------------------+
| REQUEST URL                            | METHOD                | RESPONSE                           |
+========================================+=======================+====================================+
| /block/manifests                       | GET                   | All block manifests                |
+----------------------------------------+-----------------------+------------------------------------+
| /block/{height}                        | GET                   | Block by block height              |
+----------------------------------------+-----------------------+------------------------------------+
| /block/{height}/manifest               | GET                   | Block manifest by block height     |
+----------------------------------------+-----------------------+------------------------------------+
| /block/{height}/operations             | GET                   | All operations of block            |
+----------------------------------------+-----------------------+------------------------------------+
| /block/{block_hash}                    | GET                   | Block by block hash                |
+----------------------------------------+-----------------------+------------------------------------+
| /block/{block_hash}/manifest           | GET                   | Block manifest by block hash       |
+----------------------------------------+-----------------------+------------------------------------+
| /block/operations                      | GET                   | All operations                     |
+----------------------------------------+-----------------------+------------------------------------+
| /block/operation/{fact_hash}           | GET                   | Operation by fact hash             |
+----------------------------------------+-----------------------+------------------------------------+

---------------------------------------------------
Account
---------------------------------------------------

| List of REST APIs for querying accounts.

+----------------------------------------+-----------------------+------------------------------------+
| REQUEST URL                            | METHOD                | RESPONSE                           |
+========================================+=======================+====================================+
| /account/{address}                     | GET                   | Latest state of account            |
+----------------------------------------+-----------------------+------------------------------------+
| /account/{address}/operations          | GET                   | Operations related to account      |
+----------------------------------------+-----------------------+------------------------------------+
| /accounts?publickey={public_key}       | GET                   | Accounts related to public key     |
+----------------------------------------+-----------------------+------------------------------------+

---------------------------------------------------
Currency
---------------------------------------------------

| List of REST APIs for querying currencies.

+----------------------------------------+-----------------------+------------------------------------+
| REQUEST URL                            | METHOD                | RESPONSE                           |
+========================================+=======================+====================================+
| /currency                              | GET                   | All currencies                     |
+----------------------------------------+-----------------------+------------------------------------+
| /currency/{currency_id}                | GET                   | Currency by currency id            |
+----------------------------------------+-----------------------+------------------------------------+

| Refer to `Mitum Currency Digest API Docs <https://rapidoc.test.protocon.network/>`_ for details.

---------------------------------------------------
Feefi
---------------------------------------------------

| List of REST APIs for feefi pools.

+----------------------------------------+-----------------------+------------------------------------+
| REQUEST URL                            | METHOD                | RESPONSE                           |
+========================================+=======================+====================================+
| /feefi/{pool_id}/pool/{address}        | GET                   | Feefi pool                         |
+----------------------------------------+-----------------------+------------------------------------+
| /feefi/{pool_id}/user/{address}        | GET                   | Feefi user                         |
+----------------------------------------+-----------------------+------------------------------------+

---------------------------------------------------
NFT
---------------------------------------------------

| List of REST APIs for nfts and nft collections.

+-------------------------------------------------+-----------------------+---------------------------------+
| REQUEST URL                                     | METHOD                | RESPONSE                        |
+=================================================+=======================+=================================+
| /account/{address}/nftagent/{collection_symbol} | GET                   | Agent accounts of the account   |
+-------------------------------------------------+-----------------------+---------------------------------+
| /account/{address}/nfts                         | GET                   | NFTs the account owns           |
+-------------------------------------------------+-----------------------+---------------------------------+
| /nft/collection/{collection_symbol}             | GET                   | Collection Design               |
+-------------------------------------------------+-----------------------+---------------------------------+
| /nft/collection/{collection_symbol}/nfts        | GET                   | NFTs in the collection          |
+-------------------------------------------------+-----------------------+---------------------------------+
| /nft/{nft_id}                                   | GET                   | NFT                             |
+-------------------------------------------------+-----------------------+---------------------------------+

---------------------------------------------------
Operation Builder
---------------------------------------------------

| List of REST APIs for constructing operations.

+----------------------------------------+-----------------------+------------------------------------+
| REQUEST URL                            | METHOD                | RESPONSE                           |
+========================================+=======================+====================================+
| /builder/operation                     | GET                   | Available Operation types          |
+----------------------------------------+-----------------------+------------------------------------+
| /builder/operation/fact/template/{fact}| GET                   | Fact template                      |
+----------------------------------------+-----------------------+------------------------------------+
| /builder/operation/fact                | POST {fact}           | Operation message from fact        |
+----------------------------------------+-----------------------+------------------------------------+
| /builder/operation/sign                | POST {operation}      | Operation with hash from operation |
+----------------------------------------+-----------------------+------------------------------------+
| /builder/send                          | POST {operation/seal} | Broadcast seal                     |
+----------------------------------------+-----------------------+------------------------------------+